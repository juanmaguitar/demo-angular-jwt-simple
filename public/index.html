<!DOCTYPE html>
<html lang="en" ng-app="mainApp">

<head>
    <meta charset="UTF-8">
    <title>Angular JWT</title>
    <link rel="stylesheet" type="text/css" href="bower_components/bootstrap/dist/css/bootstrap.min.css">
</head>

<body>
    <div class="container">
        <h2>{{ 3 + 5 }}</h2>
        <form ng-submit="login($event)" ng-controller="LoginController">
         		<h1>Login</h1>
            <div class="form-group">
                <label for="username">Email address</label>
                <input ng-model="username" type="text" class="form-control" id="username" placeholder="username...">
            </div>
            <div class="form-group">
                <label for="password">Password</label>
                <input ng-model="password" type="password" class="form-control" id="password" placeholder="password...">
            </div>
            <button type="submit" class="btn btn-default">Submit</button>
        </form>
    </div>
    <script src="bower_components/angular/angular.min.js" type="text/javascript"></script>
    <script type="text/javascript">
    	angular.module("mainApp", [])
    		.controller('LoginController', function($scope, AuthService) {

    			$scope.login = function( event ) {
    				event.preventDefault()
    				const { username, password } = $scope
    				AuthService.login( username, password )
    					.then( console.log )
    			}

    		})
    		.factory('AuthService', function($http) {

    			function login(username, password) {
    				return $http.post('/login', { username, password })
    					.then( response => response.data )
    			}

    			return { login }
    		})

    </script>
</body>

</html>
